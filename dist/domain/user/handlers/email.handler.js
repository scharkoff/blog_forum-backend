"use strict";var _User=_interopRequireDefault(require("../entity/User.js"));Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=handleEmailUpdate;function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}async function handleEmailUpdate(a){const b=await _User.default.findOne({email:a.email});if(b)return a.res.status(400).json({message:"\u0414\u0430\u043D\u043D\u0430\u044F \u043F\u043E\u0447\u0442\u0430 \u0443\u0436\u0435 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u0442\u0441\u044F"});const c=await _User.default.findByIdAndUpdate(a.userId,{email:a.email}).exec();if(!c)return a.res.status(404).json({message:"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D"});const{passwordHash:d,...e}=c._doc;return a.res.status(200).json({data:e,message:"\u041F\u043E\u0447\u0442\u0430 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0430"})}